<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Quickstart &middot; Ember CLI Mirage
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/style.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>
    <div class="Topbar">
      <div class="Container">
      </div>
    </div>

    <header class="Header">
  <div class="Container">
    <nav class='Header__nav'>
      <ul class='Header__nav-list'>
        <li class='Header__nav-item'>
          <a href='/docs/v0.3.x' class="Header__nav-item-link active">
            <span class="u-mobile">Docs</span>
            <span class="u-desktop">Documentation</span>
          </a>
        </li>
        <li class='Header__nav-item'>
          <a href='/blog' class="Header__nav-item-link">Blog</a>
        </li>
        <li class='Header__nav-item'>
          <a href='/about' class="Header__nav-item-link">About</a>
        </li>
        <li class='Header__nav-item'>
          <a href="http://localhost:4000" class='Header__nav-item-link' target="_blank">GitHub</a>
        </li>
      </ul>
    </nav>
    <a class="Header__logo" href="/">
      <span class='Header__logo-minor'>Ember CLI</span><br>
      <span class='Header__logo-major'>Mirage</span>
    </a>
  </div>
</header>


    <div class="Wrapper">
      <div class="Content">
        

<div class="Side-panel">

  <div class="Mobile-nav">
    <select class="Mobile-nav__toc" onchange="if (this.value) window.location.href=this.value">
      <option value="">Navigate the docs...</option>
      
        


  
  <optgroup label='Getting started'>

<option value="/docs/v0.1.x/">Overview</option>


      
        


<option value="/docs/v0.1.x/installation/">Installation</option>


      
        


<option value="/docs/v0.1.x/quickstart/">Quickstart</option>


      
        


  
    </optgroup>
  
  <optgroup label='Writing your server'>

<option value="/docs/v0.1.x/defining-routes/">Defining routes</option>


      
        


<option value="/docs/v0.1.x/seeding-your-database/">Seeding your database</option>


      
        


<option value="/docs/v0.1.x/acceptance-testing/">Acceptance testing</option>


      
        


  
    </optgroup>
  
  <optgroup label='Cookbook'>

<option value="/docs/v0.1.x/working-with-json-api/">Working with JSON:API</option>


      
        


<option value="/docs/v0.1.x/manually-starting-mirage/">Manually starting Mirage</option>


      
        


<option value="/docs/v0.1.x/simulating-cookie-responses/">Simulating cookie responses</option>


      
        


  
    </optgroup>
  
  <optgroup label='API reference'>

<option value="/docs/v0.1.x/server-configuration/">Server configuration</option>


      
        


<option value="/docs/v0.1.x/routes/">Routes</option>


      
        


<option value="/docs/v0.1.x/shorthands/">Shorthands</option>


      
        


<option value="/docs/v0.1.x/database/">Database</option>


      
        


<option value="/docs/v0.1.x/factories/">Factories</option>

  </optgroup>


      
    </select>

    <div class="Mobile-nav__version">
      <span class='Mobile-nav__version-label'>Version: </span>
      <select class='Mobile-nav__version-select' onchange="if (this.value) window.location.href=this.value">
        
          <option value="/docs/v0.3.x" >v0.3.x</option>
        
          <option value="/docs/v0.2.x" >v0.2.x</option>
        
          <option value="/docs/v0.1.x" selected >v0.1.x</option>
        
          <option value="/docs/v0.0.29" >v0.0.29</option>
        
          <option value="/docs/v0.0.28" >v0.0.28</option>
        
          <option value="/docs/v0.0.27" >v0.0.27</option>
        
      </select>
    </div>
  </div>

  <div class="Desktop-nav">
    <div class="Desktop-nav__version">
      <span class="Desktop-nav__version-label">Version: </span>
      <select class='Desktop-nav__version-select' onchange="if (this.value) window.location.href=this.value">
        
        <option value="/docs/v0.3.x" >v0.3.x</option>
        
        <option value="/docs/v0.2.x" >v0.2.x</option>
        
        <option value="/docs/v0.1.x" selected >v0.1.x</option>
        
        <option value="/docs/v0.0.29" >v0.0.29</option>
        
        <option value="/docs/v0.0.28" >v0.0.28</option>
        
        <option value="/docs/v0.0.27" >v0.0.27</option>
        
      </select>
    </div>

    <ul class="Desktop-nav__toc">
      
        
          <li class='Desktop-nav__section'>Getting started</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/">
    Overview
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/installation/">
    Installation
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item active" href="/docs/v0.1.x/quickstart/">
    Quickstart
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>Writing your server</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/defining-routes/">
    Defining routes
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/seeding-your-database/">
    Seeding your database
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/acceptance-testing/">
    Acceptance testing
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>Cookbook</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/working-with-json-api/">
    Working with JSON:API
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/manually-starting-mirage/">
    Manually starting Mirage
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/simulating-cookie-responses/">
    Simulating cookie responses
  </a>
</li>

      
        
          <li class='Desktop-nav__section'>API reference</li>
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/server-configuration/">
    Server configuration
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/routes/">
    Routes
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/shorthands/">
    Shorthands
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/database/">
    Database
  </a>
</li>

      
        

        

<li>
  <a class="Desktop-nav__item " href="/docs/v0.1.x/factories/">
    Factories
  </a>
</li>

      
    </ul>
  </div>
</div>


<div class="Center-panel">

  <div class="Docs-page">
    <div class='Docs-page__header'>
      <div class="Docs-page__version">
        <a class='Docs-page__improve' href="https://github.com/samselikoff/ember-cli-mirage/edit/gh-pages/docs/v0.1.x/quickstart.md">
          <small>
            <img class='Docs-page__improve-img' src="/public/images/edit.png" alt="">
            <span class='Docs-page__improve-text'>Improve this page</span>
          </small>
        </a>
      </div>
      <h1 class='Docs-page__title'>Quickstart</h1>
    </div>

    <div class='Docs-page__content'>
      <p>Mirage is all about mocking out your API server. You define <em>route handlers</em> to respond to your Ember app’s AJAX requests.</p>

<p>Here’s a simple example of a handler:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// app/mirage/config.js</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/api/users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Zelda'</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Link'</span> <span class="p">},</span>
        <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s1">'Epona'</span> <span class="p">},</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">});</span>

<span class="p">}</span>
</code></pre>
</div>

<p>Now whenever your Ember app makes a GET request to <code class="highlighter-rouge">/api/users</code>, Mirage will respond with this data.</p>

<hr />

<p>This works, and this is traditionally how HTTP mocking is done - but hard-coding fixture data directly into your route like this makes it inflexible. What if you want to see scenarios with different users, or want more control over the response data in your tests?</p>

<aside class="Docs-page__aside">
  <p>View the full <a href="../database">database API</a>.</p>
</aside>

<p>Instead of returning an array, let’s make this route dynamic by responding with all the users in Mirage’s in-memory database:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/api/users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">users</span><span class="p">:</span> <span class="nx">db</span><span class="p">.</span><span class="nx">users</span>
  <span class="p">};</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Now, if we want to change what data this route responds with, all we need to do is change the data in the database.</p>

<hr />

<aside class="Docs-page__aside">
  <p>You can also use flat fixture files to seed your database. Learn more in the <a href="../seeding-your-database">database guide</a>.</p>
</aside>

<p>To actually seed our database with fake data, we’ll use <em>factories</em>. Factories are objects that dynamically generate data - think of them as blueprints for your database records.</p>

<p>You create factories by adding files under <code class="highlighter-rouge">/mirage/factories/</code>:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// app/mirage/factories/user.js</span>
<span class="kr">import</span> <span class="nx">Mirage</span><span class="p">,</span> <span class="p">{</span> <span class="nx">faker</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'ember-cli-mirage'</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Mirage</span><span class="p">.</span><span class="nx">Factory</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">name</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="err">`</span><span class="nx">Person</span> <span class="nx">$</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span><span class="err">`</span><span class="p">;</span> <span class="p">},</span>
  <span class="na">age</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span>
  <span class="na">admin</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">avatar</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">faker</span><span class="p">.</span><span class="nx">internet</span><span class="p">.</span><span class="nx">avatar</span><span class="p">();</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<p>This factory will create objects like</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">name:</span><span class="w"> </span><span class="err">'Person</span><span class="w"> </span><span class="err">1',</span><span class="w">
  </span><span class="err">age:</span><span class="w"> </span><span class="err">28,</span><span class="w">
  </span><span class="err">admin:</span><span class="w"> </span><span class="err">false,</span><span class="w">
  </span><span class="err">avatar:</span><span class="w"> </span><span class="err">'https://s3.amazonaws.com/uifaces/faces/twitter/bergmartin/128.jpg'</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="err">name:</span><span class="w"> </span><span class="err">'Person</span><span class="w"> </span><span class="err">2',</span><span class="w">
  </span><span class="err">age:</span><span class="w"> </span><span class="err">28,</span><span class="w">
  </span><span class="err">admin:</span><span class="w"> </span><span class="err">false,</span><span class="w">
  </span><span class="err">avatar:</span><span class="w"> </span><span class="err">'https://s3.amazonaws.com/uifaces/faces/twitter/nemanjaivanovic/128.jpg'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>and so on. This data will be inserted into your <code class="highlighter-rouge">users</code> db table, giving each record a unique <code class="highlighter-rouge">id</code>. The records will now be available to your route handlers.</p>

<p>To actually create factory data, use the <code class="highlighter-rouge">server.create</code> or <code class="highlighter-rouge">server.createList</code> methods in development</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// app/mirage/scenarios/default.js</span>

<span class="c1">// Create 10 non-admin and 1 admin users for development</span>
<span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span><span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">createList</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>  
  <span class="nx">server</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{</span> <span class="na">admin</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="p">};</span>
</code></pre>
</div>

<p>and in your acceptance tests</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// tests/acceptance/users-test.js</span>

<span class="nx">test</span><span class="p">(</span><span class="s2">"I can view the users"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">users</span> <span class="o">=</span> <span class="nx">server</span><span class="p">.</span><span class="nx">createList</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

  <span class="nx">visit</span><span class="p">(</span><span class="s1">'/users'</span><span class="p">);</span>

  <span class="nx">andThen</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">equal</span><span class="p">(</span> <span class="nx">find</span><span class="p">(</span><span class="s1">'li'</span><span class="p">).</span><span class="nx">length</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
    <span class="nx">equal</span><span class="p">(</span> <span class="nx">find</span><span class="p">(</span><span class="s1">'li:first'</span><span class="p">).</span><span class="nx">text</span><span class="p">(),</span> <span class="nx">users</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span> <span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>You now have a simple way to set up your mock server’s initial data, both during development and on a per-test basis.</p>

<hr />

<aside class="Docs-page__aside">
  <p>View more <a href="../shorthands">shorthands</a>.</p>
</aside>

<p>Mirage provides numerous <em>shorthands</em> to reduce the code needed for conventional API routes. For example, the route</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/users'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">db</span><span class="p">,</span> <span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">users</span><span class="p">:</span> <span class="nx">db</span><span class="p">.</span><span class="nx">users</span>
  <span class="p">};</span>
<span class="p">});</span>
</code></pre>
</div>

<p>can be written simply as</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/users'</span><span class="p">);</span>
</code></pre>
</div>

<p>There are also shorthands for <code class="highlighter-rouge">put</code>, <code class="highlighter-rouge">post</code> and <code class="highlighter-rouge">del</code> methods. Here’s a full set of resourceful routes for a <code class="highlighter-rouge">user</code> resource:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/users'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/users/:id'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/users'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s1">'/users/:id'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">del</span><span class="p">(</span><span class="s1">'/users/:id'</span><span class="p">);</span>
</code></pre>
</div>

<p>Shorthands make writing your server definition concise, so you should use them whenever possible. You can always fall back to a custom function when you need more control.</p>

<hr />

<p>That should be enough to get you started! Keep reading to learn more.</p>

    </div>

    

<div class='Docs-page-nav'>
  
    
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-first" href="/docs/v0.1.x/installation/">< Installation</a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
      
      
      
        
  
         <a class="Docs-page-nav__link u-last" href="/docs/v0.1.x/defining-routes/">Defining routes ></a>
      
  
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
    
    
  
  
    
</div>

  </div>
</div>

      </div>
    </div>

    <footer class="Footer">
  <div class="Container Grid Grid--gutters Grid--full med-Grid--fit">
    <div class="Grid-cell">
      <p>Project and site maintained by <a href="https://twitter.com/samselikoff">Sam Selikoff</a> and <a href="https://github.com/samselikoff/ember-cli-mirage/graphs/contributors">contributors</a>.</p>
    </div>
    <div class="Grid-cell">
      <div class="Github-stars">
        <iframe src="https://ghbtns.com/github-btn.html?user=samselikoff&repo=ember-cli-mirage&type=star&count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js"></script>
<script>
  /* global anchors */
  // anchors.options = {
  //   placement: 'left',
  //   visible: 'always'
  // };
  anchors.add('h2:not(.Home-page__feature-heading)');
</script>


  </body>
</html>
